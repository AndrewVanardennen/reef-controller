{"version":3,"file":"reef-controller.js","sources":["../src/controllers/firebase-controller.js","../src/controllers/i2c-controller.js","../src/controllers/reef-controller.js","../src/index.js"],"sourcesContent":["'use strict';\r\nimport * as firebase from \"firebase\";\r\nexport default class FirebaseController {\r\n  constructor() {\r\n    // Initialize Firebase\r\n    const config = {\r\n      apiKey: \"AIzaSyCxBWJTjZ822a_0bxGbTJV3F1dZoQVFo1w\",\r\n      authDomain: \"reeflight-fb71e.firebaseapp.com\",\r\n      databaseURL: \"https://reeflight-fb71e.firebaseio.com\"\r\n    };\r\n    firebase.initializeApp(config);\r\n    global.firebase = firebase;\r\n  }\r\n\r\n};\r\n","'use strict';\r\nconst i2c = require('i2c');\r\nexport default class {\r\n  constructor() {\r\n    let address = 0x10; // set address to 0x10\r\n    try {\r\n      let wire = new i2c(address, {device: '/dev/i2c-1'});\r\n      wire.scan();\r\n      this.wire = wire;\r\n    } catch (e) {\r\n      this.wire = undefined;\r\n      console.warn('RPI not found on address: ' + this.address);\r\n    }\r\n  }\r\n  write(byte) {\r\n    console.log('writing byte', byte);\r\n    if (this.wire)\r\n      this.wire.writeByte(byte, err => {\r\n        console.log(\"error is \", err);\r\n      });\r\n  }\r\n}\r\n","'use strict';\r\nimport FirebaseController from './firebase-controller.js';\r\nimport I2cController from './i2c-controller.js';\r\nconst i2c = new I2cController();\r\nexport default class extends FirebaseController {\r\n  constructor() {\r\n    super();\r\n    this.start();\r\n  }\r\n  get firebase() {\r\n    return global.firebase;\r\n  }\r\n  start() {\r\n    this.firebase.database().ref('users/XpsE3FKDooeYDJwkxES9JLG8BPZ2/channel/').on('value', snapshot => {\r\n      const data = snapshot.val();\r\n      i2c.write(data);\r\n    });\r\n  }\r\n};\r\n","'use strict';\r\nimport ReefController from './controllers/reef-controller';\r\n\r\nnew ReefController();\r\n"],"names":["firebase.initializeApp","i2c"],"mappings":";;;AAEe,MAAM,kBAAkB,CAAC;EACtC,WAAW,GAAG;;IAEZ,MAAM,MAAM,GAAG;MACb,MAAM,EAAE,yCAAyC;MACjD,UAAU,EAAE,iCAAiC;MAC7C,WAAW,EAAE,wCAAwC;KACtD,CAAC;IACFA,aAAsB,CAAC,MAAM,CAAC,CAAC;IAC/B,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;GAC5B;;CAEF,AAAC;;ACbF,MAAMC,KAAG,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC;AAC3B,oBAAe,MAAM;EACnB,WAAW,GAAG;IACZ,IAAI,OAAO,GAAG,IAAI,CAAC;IACnB,IAAI;MACF,IAAI,IAAI,GAAG,IAAIA,KAAG,CAAC,OAAO,EAAE,CAAC,MAAM,EAAE,YAAY,CAAC,CAAC,CAAC;MACpD,IAAI,CAAC,IAAI,EAAE,CAAC;MACZ,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;KAClB,CAAC,OAAO,CAAC,EAAE;MACV,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;MACtB,OAAO,CAAC,IAAI,CAAC,4BAA4B,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;KAC3D;GACF;EACD,KAAK,CAAC,IAAI,EAAE;IACV,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;IAClC,IAAI,IAAI,CAAC,IAAI;MACX,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,GAAG,IAAI;QAC/B,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC;OAC/B,CAAC,CAAC;GACN;CACF,CAAA;;AClBD,MAAM,GAAG,GAAG,IAAI,aAAa,EAAE,CAAC;AAChC,qBAAe,cAAc,kBAAkB,CAAC;EAC9C,WAAW,GAAG;IACZ,KAAK,EAAE,CAAC;IACR,IAAI,CAAC,KAAK,EAAE,CAAC;GACd;EACD,IAAI,QAAQ,GAAG;IACb,OAAO,MAAM,CAAC,QAAQ,CAAC;GACxB;EACD,KAAK,GAAG;IACN,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG,CAAC,6CAA6C,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,QAAQ,IAAI;MAClG,MAAM,IAAI,GAAG,QAAQ,CAAC,GAAG,EAAE,CAAC;MAC5B,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;KACjB,CAAC,CAAC;GACJ;CACF,CAAA,AAAC;;ACfF,IAAI,cAAc,EAAE,CAAC"}